################################################################################
# Base image
################################################################################

FROM node:8.5.0

################################################################################
# Build instructions
################################################################################

# Install packages
RUN apt-get update && apt-get install -my \
    supervisor \
    \
	&& apt-get purge -y --auto-remove \
	&& apt-get clean \
	&& rm -rf /var/lib/apt/lists/*

# Add configuration files
COPY docker-entrypoint.sh /
COPY supervisord.conf /etc/supervisor/conf.d/

################################################################################
# Ports
################################################################################

EXPOSE 8000

################################################################################
# Entrypoint
################################################################################

ENTRYPOINT ["/usr/bin/supervisord", "-c", "/etc/supervisor/supervisord.conf"]